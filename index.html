<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spell Tracker - Titan</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: white;
        }

        .settings-title-container {
            display: flex;
            justify-content: space-between;
        }

        .main-title-container {
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icon components to replace Lucide
        const Settings = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        );

        const Download = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
        );

        const DarkModeIcon = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M22 15.8442C20.6866 16.4382 19.2286 16.7688 17.6935 16.7688C11.9153 16.7688 7.23116 12.0847 7.23116 6.30654C7.23116 4.77135 7.5618 3.3134 8.15577 2C4.52576 3.64163 2 7.2947 2 11.5377C2 17.3159 6.68414 22 12.4623 22C16.7053 22 20.3584 19.4742 22 15.8442Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        );

        const LDVIcon = ({ className }) => (
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
            <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
          </svg>
        );





        const SpellTracker = () => {
          const [phaseTransitions, setPhaseTransitions] = useState({ phase2: 5, phase3: 11 });
          const [phase2OneRoundBlackout, setPhase2OneRoundBlackout] = useState(false);
  	      const [phase3OneRoundBlackout, setPhase3OneRoundBlackout] = useState(false);
          const [selectedSide, setSelectedSide] = useState('Gauche');
          const [showSettings, setShowSettings] = useState(false);
          const [showLDV, setShowLDV] = useState(false);
          const [darkMode, setDarkMode] = useState(true);
          const [spellData, setSpellData] = useState([]);

          const [language, setLanguage] = useState('fr'); // 'en' or 'fr'

          const getTrad = (key) => {
            return lang[language][key] || '[NOLOC]' + key;
          }
          
          const lang = {
            'en' : {
              title: "Gargandyas Spell Tracker",
              description: "Tool to track spell casts and cooldowns for Gargandyas.",
              settings: "Settings",
              showSettings: "Show Settings",
              hideSettings: "Hide Settings",
              exportCSV: "Export CSV",
              enableDarkMode: "Enable Dark Mode",
              disableDarkMode: "Disable Dark Mode",
              showLDV: "Show LIS Image",
              hideLDV: "Hide LIS Image",
              showPhaseSettings: "Show phase settings",
              highlightSide: "Highlight Side:",
              left: "Left",
              right: "Right",
              phase2Settings: "Phase 2 Settings",
              phase2Starts: "Phase 2 starts on turn:",
              oneTurnBlackout: "1 turn blackout only",
              phase3Settings: "Phase 3 Settings",
              phase3Starts: "Phase 3 starts on turn:",
              legend: "Legend",
              turn: "Turn",
              phase: "Phase",
              spells: "Spells",
              Bleu: "Blue",
              Poussée: "Push",
              Attirance: "Pull",
              Rafale: "Side Sweep",
              'Rafale Right': "Right Side Sweep",
              'Rafale Left': "Left Side Sweep",
              'Rafale Droite': "Right Side Sweep",
              'Rafale Gauche': "Left Side Sweep",
              Patoune : "Paw Zone",
              'Patoune Right': "Right Paw Zone",
              'Patoune Left': "Left Paw Zone",
              'Patoune Droite': "Right Paw Zone",
              'Patoune Gauche': "Left Paw Zone",
              'Patoune All': "Both Side Paw",
              BLACKOUT: "BLACKOUT",
              Laser: "Laser",
              Sceau: "Seal",
              "—" : "—",

              "L'AFFICHAGE GLYPHE BLEU EST BUG FAITE GAFFE EN JEU": "BLUE GLYPH DISPLAY IS BUGGED BE CAREFUL IN GAME",
              "SCEAU DEPEND DE LA LDV PEUT VARIER": "SEAL DEPENDS OF LINE OF SIGHT CAN CHANGE",
              "Write the first turn where Gargandyas pass turn. (Last player kills T7 → write 8)":"Write the first turn where Gargandyas pass turn. (Last player kills T7 → write 8)",
            },
            'fr' : {
              title: "Gargandyas Spell Tracker",
              description: "Outil pour suivre les sorts de Gargandyas.",
              settings: "Paramètres",
              showSettings: "Afficher les paramètres",
              hideSettings: "Masquer les paramètres",
              exportCSV: "Exporter CSV",
              enableDarkMode: "Activer le dark mode",
              disableDarkMode: "Désactiver le dark mode",
              showLDV: "Afficher l'image LDV",
              hideLDV: "Masquer l'image LDV",
              showPhaseSettings: "Afficher les paramètres de phase",
              highlightSide: "Côté en surbrillance :",
              left: "Gauche",
              right: "Droite",
              phase2Settings: "Paramètres de la phase 2",
              phase2Starts: "La phase 2 commence au tour :",
              oneTurnBlackout: "1 tour de blackout seulement",
              phase3Settings: "Paramètres de la phase 3",
              phase3Starts: "La phase 3 commence au tour :",
              legend: "Légende",
              turn: "Tour",
              phase: "Phase",
              spells: "Sorts",
              Bleu: "Bleu",
              Poussée: "Poussée",
              Attirance: "Attirance",
              Rafale: "Rafale",
              'Rafale Droite': "Rafale Droite",
              'Rafale Gauche': "Rafale Gauche",
              Patoune : "Patoune",
              'Patoune Droite': "Patoune Droite",
              'Patoune Gauche': "Patoune Gauche",
              'Patoune All': "Patoune All",
              BLACKOUT: "BLACKOUT",
              Laser: "Laser",
              Sceau: "Sceau",
              "—" : "—",

              "L'AFFICHAGE GLYPHE BLEU EST BUG FAITE GAFFE EN JEU": "L'AFFICHAGE GLYPHE BLEU EST BUG FAITE GAFFE EN JEU",
              "SCEAU DEPEND DE LA LDV PEUT VARIER": "SCEAU DEPEND DE LA LDV PEUT VARIER",
              "Write the first turn where Gargandyas pass turn. (Last player kills T7 → write 8)": "Écrivez le premier tour où Gargandyas passe le tour. (Le dernier joueur tue T7 → écrire 8)",
            }
          };

          {darkMode ? document.documentElement.style.filter = 'invert(96%)' : document.documentElement.style.filter = 'invert(0)'}

          const calculateSpells = () => {
            const turns = [];
            const { phase2, phase3 } = phaseTransitions;
            
            // Initialize spell availability trackers
            let bleuNextAvailable = 1;
            let sceauNextAvailable = 1;
            let rafaleNextAvailable = 2;
            let laserNextAvailable = 2;
            let patouneNextAvailable = 2;
            let rafaleAlternate = 'left';
            let patouneAlternate = 'right';
            let blackoutTurns = [];
            
            // Calculate blackout turns
            if (phase2 > 1) {
              if (phase2OneRoundBlackout) {
                blackoutTurns.push(phase2);
              } else {
                blackoutTurns.push(phase2, phase2 + 1);
              }
            }

            if (phase3 > 1) {
              if (phase3OneRoundBlackout) {
                  blackoutTurns.push(phase3);
              } else {
                  blackoutTurns.push(phase3, phase3 + 1);
            }
    		}
            
            for (let turn = 1; turn <= 100; turn++) {
              let currentPhase = (!phase2 || (turn < phase2)) ? 'P1' : (!phase3 || (turn < phase3)) ? 'P2' : 'P3';
              let spells = [];
              let isBlackout = blackoutTurns.includes(turn) && currentPhase !== 'P1';
              
              if (isBlackout) {
                turns.push({ turn, phase: currentPhase, spells: ['BLACKOUT'], isBlackout: true });
                continue;
              }
              
              let getCurrentCooldown = (spell, phase) => {
                if (spell === 'bleu') {
                  return phase === 'P1' ? 4 : phase === 'P2' ? 3 : 2;
                } else if (spell === 'sceau') {
                  return phase === 'P1' ? 3 : phase === 'P2' ? 2 : 1;
                }
                return 0;
              };
              
              if (!window.spellLastCast) {
                window.spellLastCast = { bleu: 0, sceau: 0 };
              }
              
              if (turn === 1) {
                window.spellLastCast = { bleu: 0, sceau: 0 };
              }
              
              // Bleu spell
              if (window.spellLastCast.bleu === 0 || turn - window.spellLastCast.bleu >= getCurrentCooldown('bleu', currentPhase)) {
                spells.push('Bleu');
                window.spellLastCast.bleu = turn;
              }
              
              // Sceau spell
              if (window.spellLastCast.sceau === 0 || turn - window.spellLastCast.sceau >= getCurrentCooldown('sceau', currentPhase)) {
                spells.push('Sceau');
                window.spellLastCast.sceau = turn;
              }
              
              // Rafale spell
              if (turn >= rafaleNextAvailable) {
                spells.push(`Rafale ${getTrad(rafaleAlternate)}`);
                rafaleAlternate = rafaleAlternate === 'left' ? 'right' : 'left';
                rafaleNextAvailable = turn + 2;
              }
              
              // Patoune spell
              let isAfterBlackout = blackoutTurns.includes(turn - 1);
              if (turn >= patouneNextAvailable && !isAfterBlackout && currentPhase !== 'P3') {
                if (currentPhase === 'P2') {
                  spells.push('Patoune All');
                } else {
                  spells.push(`Patoune ${getTrad(patouneAlternate)}`);
                  patouneAlternate = patouneAlternate === 'right' ? 'left' : 'right';
                }
                patouneNextAvailable = turn + 2;
              }
              
              // Laser spell
              if (turn >= laserNextAvailable) {
                spells.push('Laser');
                laserNextAvailable = turn + 2;
              }
              
              // Poussée spell - only P3, every 3 turns starting second turn after blackout
              if (currentPhase === 'P3') {
                let p3BlackoutDuration = phase3OneRoundBlackout ? 1 : 2;
                let p3Start = phase3 + p3BlackoutDuration;
                if (turn >= p3Start + 1 && (turn - p3Start - 1) % 3 === 0) {
                  spells.push('Poussée');
                }
              }
              
              // Attirance spell - only P3, every 3 turns starting third turn after blackout
              if (currentPhase === 'P3') {
                let p3BlackoutDuration = phase3OneRoundBlackout ? 1 : 2;
                let p3Start = phase3 + p3BlackoutDuration;
                if (turn >= p3Start + 2 && (turn - p3Start - 2) % 3 === 0) {
                  spells.push('Attirance');
                }
              }
              
              turns.push({ 
                turn, 
                phase: currentPhase, 
                spells: spells.length ? spells : ['—'], 
                isBlackout: false 
              });
            }
            
            return turns;
          };

          useEffect(() => {
    setSpellData(calculateSpells());
  }, [phaseTransitions, phase2OneRoundBlackout, phase3OneRoundBlackout]);

          const getSpellHighlight = (spell) => {
            if (spell === 'BLACKOUT') return 'bg-gray-800 text-white';
            if (spell === 'Bleu') return  `${darkMode ? "bg-yellow-200 text-yellow-900" : "bg-blue-200 text-blue-900" }  font-semibold`;
            if (spell === 'Attirance') return `${darkMode ? "bg-green-200 text-green-900" : "bg-purple-200 text-purple-900" }  font-semibold`;
            if (spell === 'Poussée') return `${darkMode ? "bg-purple-200 text-purple-900" : "bg-green-200 text-green-900" }  font-semibold`;
            if (spell.includes('Rafale') && spell.includes(selectedSide)) return `${darkMode ? "bg-blue-200 text-blue-900" : "bg-yellow-200 text-yellow-900" } font-semibold`;
            return '';
          };

          const exportData = () => {
            const csvContent = "Turn,Phase,Spells\n" + 
              spellData.map(row => `${row.turn},${row.phase},"${row.spells.join(', ')}"`).join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'spell_tracker.csv';
            a.click();
            URL.revokeObjectURL(url);
          };

          return (
            <div className="max-w-7xl mx-auto p-6 bg-white min-h-screen">
              <div className="mb-6">
                <div className="main-title-container">
                  <h1 className="text-3xl font-bold text-gray-800 mb-2">Gargandyas Spell Tracker</h1>
                  <div className="flex items-center gap-2">
                    <button
                      onClick={() => setLanguage('en')}
                      className={`px-3 py-1 rounded text-sm font-medium transition-colors ${
                        language === 'en' 
                          ?  (darkMode ? "bg-orange-200 text-orange-900" : "bg-blue-200 text-blue-900")
                          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                      }`}
                    >
                      <span style={darkMode ? {filter:'invert(1)'} : {}}>🇬🇧</span> EN
                    </button>
                    <button
                      onClick={() => setLanguage('fr')}
                      className={`px-3 py-1 rounded text-sm font-medium transition-colors ${
                        language === 'fr' 
                          ? (darkMode ? "bg-orange-200 text-orange-900" : "bg-blue-200 text-blue-900")
                          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                      }`}
                    >
                    <span style={darkMode ? {filter:'invert(1)'} : {}}>🇫🇷</span> FR
                    </button>
                  </div>
                </div>
                <p className="text-gray-600">
                  Original website by Shanol :
                  <a 
                    href="https://youtu.be/G0xzrw4jTUQ" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    className={`${darkMode ? "text-cyan-400 hover:text-cyan-500" : "text-red-600 hover:text-red-700"} underline decoration-2 underline-offset-2 transition duration-200 ml-2`}
                  >
                    YouTube
                  </a>
                  <br></br>
                  <span>{getTrad("L'AFFICHAGE GLYPHE BLEU EST BUG FAITE GAFFE EN JEU")}</span>
                  <br></br>
                  <span>{getTrad("SCEAU DEPEND DE LA LDV PEUT VARIER")}</span>
                </p>
              </div>

              <div className="bg-gray-50 p-4 rounded-lg mb-6">
                <div className="flex flex-wrap gap-4 items-center justify-between">
                  <div className="flex gap-4">
                    <button
                      onClick={() => setShowSettings(!showSettings)}
                      className="flex items-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors"
                    >
                      <Settings className="w-4 h-4" />
                      {showSettings ? getTrad('hideSettings') : getTrad('showSettings')}
                    </button>
                    <button
                      onClick={exportData}
                      className="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"
                    >
                      <Download className="w-4 h-4" />
                      {getTrad('exportCSV')}
                    </button>
                    <button
                      onClick={() => {
                        setDarkMode(!darkMode);
                        if(darkMode) {
                          document.documentElement.style.filter = 'invert(0)';
                        } else {
                          document.documentElement.style.filter = 'invert(96%)';
                        }
                      }}
                      className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${
                        darkMode
                          ? 'bg-yellow-200 text-yellow-900 hover:bg-yellow-300' 
                          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                      }`}
                    >
                    <DarkModeIcon className="w-4 h-4" />{ darkMode? getTrad('disableDarkMode') : getTrad('enableDarkMode') }
                    </button>
                  </div>
                  
                  <div className="flex items-center gap-2">
                    <span className="text-sm font-medium text-gray-700">{getTrad("highlightSide")}</span>
                    <button
                      onClick={() => setSelectedSide('Gauche')}
                      className={`px-3 py-1 rounded text-sm font-medium transition-colors ${
                        selectedSide === 'Gauche' 
                          ?  (darkMode ? "bg-blue-200 text-blue-900" : "bg-yellow-200 text-yellow-900")
                          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                      }`}
                    >
                      {getTrad('left')}
                    </button>
                    <button
                      onClick={() => setSelectedSide('Droite')}
                      className={`px-3 py-1 rounded text-sm font-medium transition-colors ${
                        selectedSide === 'Droite' 
                          ? (darkMode ? "bg-blue-200 text-blue-900" : "bg-yellow-200 text-yellow-900")
                          : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                      }`}
                    >
                    {getTrad('right')}
                    </button>
                  </div>
                </div>

                {showSettings && (
          <div className="mt-4 p-4 bg-white rounded-lg border">
            <div className="settings-title-container">
              <div>
                <h3 className="font-semibold mb-3">{getTrad('settings')}</h3>
                <p>{getTrad('Write the first turn where Gargandyas pass turn. (Last player kills T7 → write 8)')}</p><br/>
              </div>
              <button
                onClick={() => setShowLDV(!showLDV)}
                className="flex items-center gap-2 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors"
                style={{height: 'fit-content'}}
                >
                {showLDV ? <Settings className="w-4 h-4" /> : <LDVIcon className="w-4 h-4" />}
                {showLDV ? getTrad('showPhaseSettings') : getTrad('showLDV')}
              </button>
            </div>
            {!(showLDV) && (
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {/* Phase 2 Settings */}
              <div className="space-y-3">
                <h4 className="font-medium text-gray-800">Phase 2</h4>
                <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1">
                      {getTrad('phase2Starts')}
                    </label>
                    <input
                      type="number"
                      min="2"
                      max="98"
                      value={phaseTransitions.phase2}
                      onChange={(e) => setPhaseTransitions(prev => ({ 
                        ...prev, 
                        phase2: e.target.value >= 2 ? parseInt(e.target.value) : null
                      }))}
                      className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                <div className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    id="phase2-one-turn"
                    checked={phase2OneRoundBlackout}
                    onChange={(e) => setPhase2OneRoundBlackout(e.target.checked)}
                    className="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                  />
                  <label htmlFor="phase2-one-turn" className="text-sm text-gray-700">
                    {getTrad('oneTurnBlackout')}
                  </label>
                </div>
              </div>

              {/* Phase 3 Settings */}
              <div className="space-y-3">
                <h4 className="font-medium text-gray-800">Phase 3</h4>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">
                    {getTrad('phase3Starts')}
                  </label>
                  <input
                    type="number"
                    min="2"
                    max="99"
                    value={phaseTransitions.phase3}
                    onChange={(e) => setPhaseTransitions(prev => ({ 
                      ...prev, 
                      phase3: e.target.value >= 2 ? parseInt(e.target.value) : null
                    }))}
                    className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>
                <div className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    id="phase3-one-turn"
                    checked={phase3OneRoundBlackout}
                    onChange={(e) => setPhase3OneRoundBlackout(e.target.checked)}
                    className="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                  />
                  <label htmlFor="phase3-one-turn" className="text-sm text-gray-700">
                    {getTrad('oneTurnBlackout')}
                  </label>
                </div>
              </div>
            </div>
            )}

              {showLDV && 
                <div className="space-y-6 md:col-span-2">    
                      <div>
                        <img style={darkMode ? {filter:'invert(1)'} : {}}  src="./ldv.png" alt="LDV Sceau" className="w-full h-auto rounded-md shadow-sm" />
                      </div>
                </div>
              }
            </div>
          
        )}
      </div>


              <div className="bg-white border rounded-lg shadow-sm">
                <div className="overflow-x-auto">
                  <table className="w-full">
                    <thead className="bg-gray-50 border-b">
                      <tr>
                        <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          {getTrad('turn')}
                        </th>
                        <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          {getTrad('phase')}
                        </th>
                        <th className="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          {getTrad('spells')}
                        </th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-gray-200">
                      {spellData.map((row, index) => (
                        <tr key={index} className={row.isBlackout ? 'bg-gray-100' : 'hover:bg-gray-50'}>
                          <td className="px-4 py-3 text-sm font-medium text-gray-900">
                            {row.turn}
                          </td>
                          <td className="px-4 py-3 text-sm text-gray-700">
                            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                              row.phase === 'P1' ? 'bg-red-100 text-red-800' :
                              row.phase === 'P2' ? 'bg-yellow-100 text-yellow-800' :
                              'bg-green-100 text-green-800'
                            }`}>
                              {row.phase}
                            </span>
                          </td>
                          <td className="px-4 py-3 text-sm text-gray-700">
                            <div className="flex flex-wrap gap-1">
                              {row.spells.map((spell, spellIndex) => (
                                <span
                                  key={spellIndex}
                                  className={`inline-flex px-2 py-1 text-xs rounded-full ${
                                    getSpellHighlight(spell) || 'bg-gray-100 text-gray-700'
                                  }`}
                                >
                                  {getTrad(spell)}
                                </span>
                              ))}
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>

              <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                <h3 className="font-semibold text-blue-900 mb-2">Legend</h3>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                  <div className="flex items-center gap-2">
                    <div className={`w-4 h-4 rounded ${darkMode ? "bg-yellow-200" : "bg-blue-200" }`}></div>
                    <span>{getTrad('Bleu')}</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <div className={`w-4 h-4 rounded ${darkMode ? "bg-green-200" : "bg-purple-200" }`}></div>
                    <span>{getTrad('Attirance')}</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <div className={`w-4 h-4 rounded ${darkMode ? "bg-purple-200" : "bg-green-200"}`}></div>
                    <span>{getTrad('Poussée')}</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <div className={`w-4 h-4 rounded ${darkMode ? "bg-blue-200" : "bg-yellow-200"}`}></div>
                    <span>{getTrad('Rafale')}</span>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<SpellTracker />, document.getElementById('root'));
    </script>
</body>
</html>
